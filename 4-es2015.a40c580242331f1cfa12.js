(window.webpackJsonp=window.webpackJsonp||[]).push([[4,5],{"/+cc":function(e,t,r){e.exports=function(e){var t={};function r(n){if(t[n])return t[n].exports;var i=t[n]={i:n,l:!1,exports:{}};return e[n].call(i.exports,i,i.exports,r),i.l=!0,i.exports}return r.m=e,r.c=t,r.d=function(e,t,n){r.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},r.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},r.t=function(e,t){if(1&t&&(e=r(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(r.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var i in e)r.d(n,i,(function(t){return e[t]}).bind(null,i));return n},r.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return r.d(t,"a",t),t},r.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},r.p="",r(r.s=1)}([function(e,t){e.exports=function(e){return Array.isArray?Array.isArray(e):"[object Array]"===Object.prototype.toString.call(e)}},function(e,t,r){function n(e){return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var i=r(2),o=r(8),s=r(0),a=function(){function e(t,r){var n=r.location,i=void 0===n?0:n,s=r.distance,a=void 0===s?100:s,u=r.threshold,l=void 0===u?.6:u,c=r.maxPatternLength,h=void 0===c?32:c,f=r.caseSensitive,p=void 0!==f&&f,d=r.tokenSeparator,v=void 0===d?/ +/g:d,m=r.findAllMatches,g=void 0!==m&&m,y=r.minMatchCharLength,b=void 0===y?1:y,k=r.id,w=void 0===k?null:k,O=r.keys,S=void 0===O?[]:O,_=r.shouldSort,x=void 0===_||_,M=r.getFn,T=void 0===M?o:M,A=r.sortFn,I=void 0===A?function(e,t){return e.score-t.score}:A,$=r.tokenize,P=void 0!==$&&$,E=r.matchAllTokens,L=void 0!==E&&E,q=r.includeMatches,N=void 0!==q&&q,j=r.includeScore,C=void 0!==j&&j,D=r.verbose,z=void 0!==D&&D;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.options={location:i,distance:a,threshold:l,maxPatternLength:h,isCaseSensitive:p,tokenSeparator:v,findAllMatches:g,minMatchCharLength:b,id:w,keys:S,includeMatches:N,includeScore:C,shouldSort:x,getFn:T,sortFn:I,verbose:z,tokenize:P,matchAllTokens:L},this.setCollection(t)}var t;return(t=[{key:"setCollection",value:function(e){return this.list=e,e}},{key:"search",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{limit:!1};this._log('---------\nSearch pattern: "'.concat(e,'"'));var r=this._prepareSearchers(e),n=this._search(r.tokenSearchers,r.fullSearcher),i=n.results;return this._computeScore(n.weights,i),this.options.shouldSort&&this._sort(i),t.limit&&"number"==typeof t.limit&&(i=i.slice(0,t.limit)),this._format(i)}},{key:"_prepareSearchers",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=[];if(this.options.tokenize)for(var r=e.split(this.options.tokenSeparator),n=0,o=r.length;n<o;n+=1)t.push(new i(r[n],this.options));return{tokenSearchers:t,fullSearcher:new i(e,this.options)}}},{key:"_search",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1?arguments[1]:void 0,r=this.list,n={},i=[];if("string"==typeof r[0]){for(var o=0,s=r.length;o<s;o+=1)this._analyze({key:"",value:r[o],record:o,index:o},{resultMap:n,results:i,tokenSearchers:e,fullSearcher:t});return{weights:null,results:i}}for(var a={},u=0,l=r.length;u<l;u+=1)for(var c=r[u],h=0,f=this.options.keys.length;h<f;h+=1){var p=this.options.keys[h];if("string"!=typeof p){if(a[p.name]={weight:1-p.weight||1},p.weight<=0||p.weight>1)throw new Error("Key weight has to be > 0 and <= 1");p=p.name}else a[p]={weight:1};this._analyze({key:p,value:this.options.getFn(c,p),record:c,index:u},{resultMap:n,results:i,tokenSearchers:e,fullSearcher:t})}return{weights:a,results:i}}},{key:"_analyze",value:function(e,t){var r=e.key,n=e.arrayIndex,i=void 0===n?-1:n,o=e.value,a=e.record,u=e.index,l=t.tokenSearchers,c=void 0===l?[]:l,h=t.fullSearcher,f=void 0===h?[]:h,p=t.resultMap,d=void 0===p?{}:p,v=t.results,m=void 0===v?[]:v;if(null!=o){var g=!1,y=-1,b=0;if("string"==typeof o){this._log("\nKey: ".concat(""===r?"-":r));var k=f.search(o);if(this._log('Full text: "'.concat(o,'", score: ').concat(k.score)),this.options.tokenize){for(var w=o.split(this.options.tokenSeparator),O=[],S=0;S<c.length;S+=1){var _=c[S];this._log('\nPattern: "'.concat(_.pattern,'"'));for(var x=!1,M=0;M<w.length;M+=1){var T=w[M],A=_.search(T),I={};A.isMatch?(I[T]=A.score,g=!0,x=!0,O.push(A.score)):(I[T]=1,this.options.matchAllTokens||O.push(1)),this._log('Token: "'.concat(T,'", score: ').concat(I[T]))}x&&(b+=1)}y=O[0];for(var $=O.length,P=1;P<$;P+=1)y+=O[P];this._log("Token score average:",y/=$)}var E=k.score;y>-1&&(E=(E+y)/2),this._log("Score average:",E);var L=!this.options.tokenize||!this.options.matchAllTokens||b>=c.length;if(this._log("\nCheck Matches: ".concat(L)),(g||k.isMatch)&&L){var q=d[u];q?q.output.push({key:r,arrayIndex:i,value:o,score:E,matchedIndices:k.matchedIndices}):(d[u]={item:a,output:[{key:r,arrayIndex:i,value:o,score:E,matchedIndices:k.matchedIndices}]},m.push(d[u]))}}else if(s(o))for(var N=0,j=o.length;N<j;N+=1)this._analyze({key:r,arrayIndex:N,value:o[N],record:a,index:u},{resultMap:d,results:m,tokenSearchers:c,fullSearcher:f})}}},{key:"_computeScore",value:function(e,t){this._log("\n\nComputing score:\n");for(var r=0,n=t.length;r<n;r+=1){for(var i=t[r].output,o=i.length,s=1,a=1,u=0;u<o;u+=1){var l=e?e[i[u].key].weight:1,c=(1===l?i[u].score:i[u].score||.001)*l;1!==l?a=Math.min(a,c):(i[u].nScore=c,s*=c)}t[r].score=1===a?s:a,this._log(t[r])}}},{key:"_sort",value:function(e){this._log("\n\nSorting...."),e.sort(this.options.sortFn)}},{key:"_format",value:function(e){var t=[];if(this.options.verbose){var r=[];this._log("\n\nOutput:\n\n",JSON.stringify(e,function(e,t){if("object"===n(t)&&null!==t){if(-1!==r.indexOf(t))return;r.push(t)}return t})),r=null}var i=[];this.options.includeMatches&&i.push(function(e,t){var r=e.output;t.matches=[];for(var n=0,i=r.length;n<i;n+=1){var o=r[n];if(0!==o.matchedIndices.length){var s={indices:o.matchedIndices,value:o.value};o.key&&(s.key=o.key),o.hasOwnProperty("arrayIndex")&&o.arrayIndex>-1&&(s.arrayIndex=o.arrayIndex),t.matches.push(s)}}}),this.options.includeScore&&i.push(function(e,t){t.score=e.score});for(var o=0,s=e.length;o<s;o+=1){var a=e[o];if(this.options.id&&(a.item=this.options.getFn(a.item,this.options.id)[0]),i.length){for(var u={item:a.item},l=0,c=i.length;l<c;l+=1)i[l](a,u);t.push(u)}else t.push(a.item)}return t}},{key:"_log",value:function(){var e;this.options.verbose&&(e=console).log.apply(e,arguments)}}])&&function(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}(e.prototype,t),e}();e.exports=a},function(e,t,r){var n=r(3),i=r(4),o=r(7),s=function(){function e(t,r){var n=r.location,i=void 0===n?0:n,s=r.distance,a=void 0===s?100:s,u=r.threshold,l=void 0===u?.6:u,c=r.maxPatternLength,h=void 0===c?32:c,f=r.isCaseSensitive,p=void 0!==f&&f,d=r.tokenSeparator,v=void 0===d?/ +/g:d,m=r.findAllMatches,g=void 0!==m&&m,y=r.minMatchCharLength,b=void 0===y?1:y;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.options={location:i,distance:a,threshold:l,maxPatternLength:h,isCaseSensitive:p,tokenSeparator:v,findAllMatches:g,minMatchCharLength:b},this.pattern=this.options.isCaseSensitive?t:t.toLowerCase(),this.pattern.length<=h&&(this.patternAlphabet=o(this.pattern))}var t;return(t=[{key:"search",value:function(e){if(this.options.isCaseSensitive||(e=e.toLowerCase()),this.pattern===e)return{isMatch:!0,score:0,matchedIndices:[[0,e.length-1]]};var t=this.options;if(this.pattern.length>t.maxPatternLength)return n(e,this.pattern,t.tokenSeparator);var r=this.options;return i(e,this.pattern,this.patternAlphabet,{location:r.location,distance:r.distance,threshold:r.threshold,findAllMatches:r.findAllMatches,minMatchCharLength:r.minMatchCharLength})}}])&&function(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}(e.prototype,t),e}();e.exports=s},function(e,t){var r=/[\-\[\]\/\{\}\(\)\*\+\?\.\\\^\$\|]/g;e.exports=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:/ +/g,i=new RegExp(t.replace(r,"\\$&").replace(n,"|")),o=e.match(i),s=!!o,a=[];if(s)for(var u=0,l=o.length;u<l;u+=1){var c=o[u];a.push([e.indexOf(c),c.length-1])}return{score:s?.5:1,isMatch:s,matchedIndices:a}}},function(e,t,r){var n=r(5),i=r(6);e.exports=function(e,t,r,o){for(var s=o.location,a=o.distance,u=void 0===a?100:a,l=o.threshold,c=o.findAllMatches,h=void 0!==c&&c,f=o.minMatchCharLength,p=void 0===f?1:f,d=void 0===s?0:s,v=e.length,m=void 0===l?.6:l,g=e.indexOf(t,d),y=t.length,b=[],k=0;k<v;k+=1)b[k]=0;if(-1!==g){var w=n(t,{errors:0,currentLocation:g,expectedLocation:d,distance:u});if(m=Math.min(w,m),-1!==(g=e.lastIndexOf(t,d+y))){var O=n(t,{errors:0,currentLocation:g,expectedLocation:d,distance:u});m=Math.min(O,m)}}g=-1;for(var S=[],_=1,x=y+v,M=1<<y-1,T=0;T<y;T+=1){for(var A=0,I=x;A<I;)n(t,{errors:T,currentLocation:d+I,expectedLocation:d,distance:u})<=m?A=I:x=I,I=Math.floor((x-A)/2+A);x=I;var $=Math.max(1,d-I+1),P=h?v:Math.min(d+I,v)+y,E=Array(P+2);E[P+1]=(1<<T)-1;for(var L=P;L>=$;L-=1){var q=L-1,N=r[e.charAt(q)];if(N&&(b[q]=1),E[L]=(E[L+1]<<1|1)&N,0!==T&&(E[L]|=(S[L+1]|S[L])<<1|1|S[L+1]),E[L]&M&&(_=n(t,{errors:T,currentLocation:q,expectedLocation:d,distance:u}))<=m){if(m=_,(g=q)<=d)break;$=Math.max(1,2*d-g)}}if(n(t,{errors:T+1,currentLocation:d,expectedLocation:d,distance:u})>m)break;S=E}return{isMatch:g>=0,score:0===_?.001:_,matchedIndices:i(b,p)}}},function(e,t){e.exports=function(e,t){var r=t.errors,n=t.currentLocation,i=t.expectedLocation,o=t.distance,s=void 0===o?100:o,a=(void 0===r?0:r)/e.length,u=Math.abs((void 0===i?0:i)-(void 0===n?0:n));return s?a+u/s:u?1:a}},function(e,t){e.exports=function(){for(var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,r=[],n=-1,i=-1,o=0,s=e.length;o<s;o+=1){var a=e[o];a&&-1===n?n=o:a||-1===n||((i=o-1)-n+1>=t&&r.push([n,i]),n=-1)}return e[o-1]&&o-n>=t&&r.push([n,o-1]),r}},function(e,t){e.exports=function(e){for(var t={},r=e.length,n=0;n<r;n+=1)t[e.charAt(n)]=0;for(var i=0;i<r;i+=1)t[e.charAt(i)]|=1<<r-i-1;return t}},function(e,t,r){var n=r(0);e.exports=function(e,t){return function e(t,r,i){if(r){var o=r.indexOf("."),s=r,a=null;-1!==o&&(s=r.slice(0,o),a=r.slice(o+1));var u=t[s];if(null!=u)if(a||"string"!=typeof u&&"number"!=typeof u)if(n(u))for(var l=0,c=u.length;l<c;l+=1)e(u[l],a,i);else a&&e(u,a,i);else i.push(u.toString())}else i.push(t);return i}(e,t,[])}}])},"7Xm5":function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.defaultNetworkSettings={feeAddress:"bitcoincash:qp5x5tmxluwm62ny66zy9u4zuqvkmcv8sq2ceuxmwd",feeAddressSlp:"simpleledger:qp5x5tmxluwm62ny66zy9u4zuqvkmcv8sqxrj8nmsn",feeDivisor:500}},"88k+":function(e,t,r){"use strict";var n=this&&this.__awaiter||function(e,t,r,n){return new(r||(r=Promise))(function(i,o){function s(e){try{u(n.next(e))}catch(t){o(t)}}function a(e){try{u(n.throw(e))}catch(t){o(t)}}function u(e){e.done?i(e.value):new r(function(t){t(e.value)}).then(s,a)}u((n=n.apply(e,t||[])).next())})},i=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)Object.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t.default=e,t},o=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const s=r("Mpt7"),a=r("J66h"),u=r("moT7"),l=i(r("2Qfn")),c=o(r("kB5k"));t.MarketToken=(()=>{class e{constructor(e,t){this._offers=s.List(),this._receivedOfferListeners=[],this._tokenId=e,this._networkSettings=t,this._listenForOffers(),this._listenForCancels()}static create(t,r){return n(this,void 0,void 0,function*(){yield l.ready;const n=new e(t,r);return yield n._fetchOffers(),n})}_listenForOffers(){const e=a.Base64.encode(JSON.stringify({v:3,q:{find:{"in.b0":u.LOKAD_ID_BASE64,"in.b1":u.VERSION,"slp.valid":!0,"slp.detail.tokenIdHex":this._tokenId}}}));new EventSource("https://slpsocket.fountainhead.cash/s/"+e).onmessage=e=>this._receivedTx(e)}_listenForCancels(){const e=a.Base64.encode(JSON.stringify({v:3,q:{find:{"in.b0":{$ne:u.LOKAD_ID_BASE64},"in.b1":{$ne:u.VERSION},"in.b2":{op:0},"slp.valid":!0,"slp.detail.tokenIdHex":this._tokenId}}}));new EventSource("https://slpsocket.fountainhead.cash/s/"+e).onmessage=e=>this._receivedTx(e)}_receivedTx(t){const r=JSON.parse(t.data);if(e.debug&&console.log(t),"mempool"==r.type){for(const e of r.data){if(this._offers=this._offers.filter(t=>-1==e.in.findIndex(e=>t.utxoEntry.txid==e.e.h&&t.utxoEntry.vout==e.e.i)),void 0===this._findExchInput(e))continue;const t=this._transformTx(e);void 0!==t&&(this._offers=this._offers.push(t))}this._offers=this._offers.sortBy(e=>e.pricePerToken),this._receivedOfferListeners.forEach(e=>e())}}_fetchOffers(){return n(this,void 0,void 0,function*(){const e=a.Base64.encode(JSON.stringify({v:3,q:{db:["c","u"],aggregate:[{$match:{"in.b0":u.LOKAD_ID_BASE64,"in.b1":u.VERSION,"slp.valid":!0,"slp.detail.tokenIdHex":this._tokenId}},{$addFields:{utxoId:{$concat:["$tx.h",":1"]}}},{$lookup:{from:"utxos",localField:"utxoId",foreignField:"utxo",as:"foundUtxo"}},{$match:{foundUtxo:{$ne:[]}}}]}})),t=yield fetch("https://slpdb.fountainhead.cash/q/"+e),r=yield t.json(),n=r.u.concat(r.c);this._offers=s.List(n).flatMap(e=>{const t=this._transformTx(e);return void 0===t?s.List.of():s.List.of(t)}).sortBy(e=>e.pricePerToken.toNumber())})}_findExchInput(e){const t=e.in.filter(e=>e.b0==u.LOKAD_ID_BASE64&&"object"==typeof e.b1&&e.b1.op==u.VERSION.op);if(0!=t.length)return t[0]}_transformTx(e){const t=new c.default("10").pow(e.slp.detail.decimals),r=this._findExchInput(e);if(void 0!==r&&r.b2&&r.b3&&r.b4)try{const i={bchSatoshis:e.out[1].e.v,address:e.out[1].e.a,slpAmount:e.slp.detail.outputs[0].amount},o=u.decodePrice(e.slp.detail.decimals,{power:r.b2,price:r.b3}),s={timestamp:e.blk&&e.blk.t,utxoEntry:{txid:e.tx.h,vout:1,satoshis:new c.default(i.bchSatoshis),address:i.address},pricePerToken:o.pricePerToken,scriptPrice:o.scriptPrice,sellAmountToken:new c.default(i.slpAmount),receivingAddress:u.decodeAddress(r.b4),expectedAddress:""};if(s.expectedAddress=l.advancedTradeOfferAddress(t,{tokenId:e.slp.detail.tokenIdHex,sellAmountToken:s.sellAmountToken,pricePerToken:s.pricePerToken,receivingAddress:s.receivingAddress,feeAddress:this._networkSettings.feeAddress,feeDivisor:new c.default(this._networkSettings.feeDivisor)}),s.expectedAddress!=s.utxoEntry.address)return;return s}catch(n){return}}offers(){return this._offers}tokenId(){return this._tokenId}addReceivedOfferListener(e){this._receivedOfferListeners.push(e)}}return e.debug=!1,e})()},Cchj:function(e,t,r){"use strict";var n=r("O2hg").validate,i={q:0,p:1,z:2,r:3,y:4,9:5,x:6,8:7,g:8,f:9,2:10,t:11,v:12,d:13,w:14,0:15,s:16,3:17,j:18,n:19,5:20,4:21,k:22,h:23,c:24,e:25,6:26,m:27,u:28,a:29,7:30,l:31};e.exports={encode:function(e){n(e instanceof Uint8Array,"Invalid data: "+e+".");for(var t="",r=0;r<e.length;++r){var i=e[r];n(0<=i&&i<32,"Invalid value: "+i+"."),t+="qpzry9x8gf2tvdw0s3jn54khce6mua7l"[i]}return t},decode:function(e){n("string"==typeof e,"Invalid base32-encoded string: "+e+".");for(var t=new Uint8Array(e.length),r=0;r<e.length;++r){var o=e[r];n(o in i,"Invalid value: "+o+"."),t[r]=i[o]}return t}}},MxGg:function(e,t,r){"use strict";var n=r("O2hg").validate;e.exports=function(e,t,r,i){for(var o=i?Math.floor(e.length*t/r):Math.ceil(e.length*t/r),s=(1<<r)-1,a=new Uint8Array(o),u=0,l=0,c=0,h=0;h<e.length;++h){var f=e[h];for(n(0<=f&&f>>t==0,"Invalid value: "+f+"."),l=l<<t|f,c+=t;c>=r;)a[u]=l>>(c-=r)&s,++u}return i?n(c<t&&0==(l<<r-c&s),"Input cannot be converted to "+r+" bits without padding, but strict mode was used."):c>0&&(a[u]=l<<r-c&s,++u),a}},O2hg:function(e,t,r){"use strict";function n(e){var t=new Error;this.name=t.name="ValidationError",this.message=t.message=e,this.stack=t.stack}n.prototype=Object.create(Error.prototype),e.exports={ValidationError:n,validate:function(e,t){if(!e)throw new n(t)}}},Rkdt:function(e,t,r){"use strict";function n(e){for(var r in e)t.hasOwnProperty(r)||(t[r]=e[r])}Object.defineProperty(t,"__esModule",{value:!0}),n(r("uGzR")),n(r("88k+")),n(r("7Xm5"))},YuTi:function(e,t){e.exports=function(e){return e.webpackPolyfill||(e.deprecate=function(){},e.paths=[],e.children||(e.children=[]),Object.defineProperty(e,"loaded",{enumerable:!0,get:function(){return e.l}}),Object.defineProperty(e,"id",{enumerable:!0,get:function(){return e.i}}),e.webpackPolyfill=1),e}},dAlA:function(e,t,r){(function(e){var r,n=function(e){"use strict";var t=1e7,r=7,i=9007199254740992,o=h(i),s=Math.log(i);function a(e,t){return void 0===e?a[0]:void 0!==t?10==+t?H(e):U(e,t):H(e)}function u(e,t){this.value=e,this.sign=t,this.isSmall=!1}function l(e){this.value=e,this.sign=e<0,this.isSmall=!0}function c(e){return-i<e&&e<i}function h(e){return e<1e7?[e]:e<1e14?[e%1e7,Math.floor(e/1e7)]:[e%1e7,Math.floor(e/1e7)%1e7,Math.floor(e/1e14)]}function f(e){p(e);var r=e.length;if(r<4&&A(e,o)<0)switch(r){case 0:return 0;case 1:return e[0];case 2:return e[0]+e[1]*t;default:return e[0]+(e[1]+e[2]*t)*t}return e}function p(e){for(var t=e.length;0===e[--t];);e.length=t+1}function d(e){for(var t=new Array(e),r=-1;++r<e;)t[r]=0;return t}function v(e){return e>0?Math.floor(e):Math.ceil(e)}function m(e,r){var n,i,o=e.length,s=r.length,a=new Array(o),u=0,l=t;for(i=0;i<s;i++)a[i]=(n=e[i]+r[i]+u)-(u=n>=l?1:0)*l;for(;i<o;)n=e[i]+u,a[i++]=n-(u=n===l?1:0)*l;return u>0&&a.push(u),a}function g(e,t){return e.length>=t.length?m(e,t):m(t,e)}function y(e,r){var n,i,o=e.length,s=new Array(o),a=t;for(i=0;i<o;i++)n=e[i]-a+r,r=Math.floor(n/a),s[i]=n-r*a,r+=1;for(;r>0;)s[i++]=r%a,r=Math.floor(r/a);return s}function b(e,r){var n,i,o=e.length,s=r.length,a=new Array(o),u=0,l=t;for(n=0;n<s;n++)(i=e[n]-u-r[n])<0?(i+=l,u=1):u=0,a[n]=i;for(n=s;n<o;n++){if(!((i=e[n]-u)<0)){a[n++]=i;break}a[n]=i+=l}for(;n<o;n++)a[n]=e[n];return p(a),a}function k(e,r,n){var i,o,s=e.length,a=new Array(s),c=-r,h=t;for(i=0;i<s;i++)o=e[i]+c,c=Math.floor(o/h),a[i]=(o%=h)<0?o+h:o;return"number"==typeof(a=f(a))?(n&&(a=-a),new l(a)):new u(a,n)}function w(e,r){var n,i,o,s,a=e.length,u=r.length,l=d(a+u),c=t;for(o=0;o<a;++o){s=e[o];for(var h=0;h<u;++h)n=s*r[h]+l[o+h],i=Math.floor(n/c),l[o+h]=n-i*c,l[o+h+1]+=i}return p(l),l}function O(e,r){var n,i,o=e.length,s=new Array(o),a=t,u=0;for(i=0;i<o;i++)n=e[i]*r+u,u=Math.floor(n/a),s[i]=n-u*a;for(;u>0;)s[i++]=u%a,u=Math.floor(u/a);return s}function S(e,t){for(var r=[];t-- >0;)r.push(0);return r.concat(e)}function _(e,r,n){return new u(e<t?O(r,e):w(r,h(e)),n)}function x(e){var r,n,i,o,s=e.length,a=d(s+s),u=t;for(i=0;i<s;i++){n=0-(o=e[i])*o;for(var l=i;l<s;l++)r=o*e[l]*2+a[i+l]+n,n=Math.floor(r/u),a[i+l]=r-n*u;a[i+s]=n}return p(a),a}function M(e,r){var n,i,o,s,a=e.length,u=d(a),l=t;for(o=0,n=a-1;n>=0;--n)o=(s=o*l+e[n])-(i=v(s/r))*r,u[n]=0|i;return[u,0|o]}function T(e,r){var n,i,o=H(r),s=e.value,c=o.value;if(0===c)throw new Error("Cannot divide by zero");if(e.isSmall)return o.isSmall?[new l(v(s/c)),new l(s%c)]:[a[0],e];if(o.isSmall){if(1===c)return[e,a[0]];if(-1==c)return[e.negate(),a[0]];var m=Math.abs(c);if(m<t){i=f((n=M(s,m))[0]);var g=n[1];return e.sign&&(g=-g),"number"==typeof i?(e.sign!==o.sign&&(i=-i),[new l(i),new l(g)]):[new u(i,e.sign!==o.sign),new l(g)]}c=h(m)}var y=A(s,c);if(-1===y)return[a[0],e];if(0===y)return[a[e.sign===o.sign?1:-1],a[0]];n=s.length+c.length<=200?function(e,r){var n,i,o,s,a,u,l,c=e.length,h=r.length,p=t,v=d(r.length),m=r[h-1],g=Math.ceil(p/(2*m)),y=O(e,g),b=O(r,g);for(y.length<=c&&y.push(0),b.push(0),m=b[h-1],i=c-h;i>=0;i--){for(n=p-1,y[i+h]!==m&&(n=Math.floor((y[i+h]*p+y[i+h-1])/m)),o=0,s=0,u=b.length,a=0;a<u;a++)o+=n*b[a],l=Math.floor(o/p),s+=y[i+a]-(o-l*p),o=l,s<0?(y[i+a]=s+p,s=-1):(y[i+a]=s,s=0);for(;0!==s;){for(n-=1,o=0,a=0;a<u;a++)(o+=y[i+a]-p+b[a])<0?(y[i+a]=o+p,o=0):(y[i+a]=o,o=1);s+=o}v[i]=n}return y=M(y,g)[0],[f(v),f(y)]}(s,c):function(e,r){for(var n,i,o,s,a=e.length,u=r.length,l=[],c=[],h=t;a;)if(c.unshift(e[--a]),p(c),A(c,r)<0)l.push(0);else{o=c[(i=c.length)-1]*h+c[i-2],i>u&&(o=(o+1)*h),n=Math.ceil(o/(r[u-1]*h+r[u-2]));do{if(A(s=O(r,n),c)<=0)break;n--}while(n);l.push(n),c=b(c,s)}return l.reverse(),[f(l),f(c)]}(s,c);var k=e.sign!==o.sign,w=n[1],S=e.sign;return"number"==typeof(i=n[0])?(k&&(i=-i),i=new l(i)):i=new u(i,k),"number"==typeof w?(S&&(w=-w),w=new l(w)):w=new u(w,S),[i,w]}function A(e,t){if(e.length!==t.length)return e.length>t.length?1:-1;for(var r=e.length-1;r>=0;r--)if(e[r]!==t[r])return e[r]>t[r]?1:-1;return 0}function I(e){var t=e.abs();return!t.isUnit()&&(!!(t.equals(2)||t.equals(3)||t.equals(5))||!(t.isEven()||t.isDivisibleBy(3)||t.isDivisibleBy(5))&&(!!t.lesser(49)||void 0))}function $(e,t){for(var r,i,o,s=e.prev(),u=s,l=0;u.isEven();)u=u.divide(2),l++;e:for(i=0;i<t.length;i++)if(!e.lesser(t[i])&&!(o=n(t[i]).modPow(u,e)).equals(a[1])&&!o.equals(s)){for(r=l-1;0!=r;r--){if((o=o.square().mod(e)).isUnit())return!1;if(o.equals(s))continue e}return!1}return!0}u.prototype=Object.create(a.prototype),l.prototype=Object.create(a.prototype),u.prototype.add=function(e){var t=H(e);if(this.sign!==t.sign)return this.subtract(t.negate());var r=this.value,n=t.value;return new u(t.isSmall?y(r,Math.abs(n)):g(r,n),this.sign)},u.prototype.plus=u.prototype.add,l.prototype.add=function(e){var t=H(e),r=this.value;if(r<0!==t.sign)return this.subtract(t.negate());var n=t.value;if(t.isSmall){if(c(r+n))return new l(r+n);n=h(Math.abs(n))}return new u(y(n,Math.abs(r)),r<0)},l.prototype.plus=l.prototype.add,u.prototype.subtract=function(e){var t=H(e);if(this.sign!==t.sign)return this.add(t.negate());var r=this.value,n=t.value;return t.isSmall?k(r,Math.abs(n),this.sign):function(e,t,r){var n;return A(e,t)>=0?n=b(e,t):(n=b(t,e),r=!r),"number"==typeof(n=f(n))?(r&&(n=-n),new l(n)):new u(n,r)}(r,n,this.sign)},u.prototype.minus=u.prototype.subtract,l.prototype.subtract=function(e){var t=H(e),r=this.value;if(r<0!==t.sign)return this.add(t.negate());var n=t.value;return t.isSmall?new l(r-n):k(n,Math.abs(r),r>=0)},l.prototype.minus=l.prototype.subtract,u.prototype.negate=function(){return new u(this.value,!this.sign)},l.prototype.negate=function(){var e=this.sign,t=new l(-this.value);return t.sign=!e,t},u.prototype.abs=function(){return new u(this.value,!1)},l.prototype.abs=function(){return new l(Math.abs(this.value))},u.prototype.multiply=function(e){var r,n,i,o=H(e),s=this.value,l=o.value,c=this.sign!==o.sign;if(o.isSmall){if(0===l)return a[0];if(1===l)return this;if(-1===l)return this.negate();if((r=Math.abs(l))<t)return new u(O(s,r),c);l=h(r)}return-.012*(n=s.length)-.012*(i=l.length)+15e-6*n*i>0?new u(function e(t,r){var n=Math.max(t.length,r.length);if(n<=30)return w(t,r);n=Math.ceil(n/2);var i=t.slice(n),o=t.slice(0,n),s=r.slice(n),a=r.slice(0,n),u=e(o,a),l=e(i,s),c=e(g(o,i),g(a,s)),h=g(g(u,S(b(b(c,u),l),n)),S(l,2*n));return p(h),h}(s,l),c):new u(w(s,l),c)},u.prototype.times=u.prototype.multiply,l.prototype._multiplyBySmall=function(e){return c(e.value*this.value)?new l(e.value*this.value):_(Math.abs(e.value),h(Math.abs(this.value)),this.sign!==e.sign)},u.prototype._multiplyBySmall=function(e){return 0===e.value?a[0]:1===e.value?this:-1===e.value?this.negate():_(Math.abs(e.value),this.value,this.sign!==e.sign)},l.prototype.times=l.prototype.multiply=function(e){return H(e)._multiplyBySmall(this)},u.prototype.square=function(){return new u(x(this.value),!1)},l.prototype.square=function(){var e=this.value*this.value;return c(e)?new l(e):new u(x(h(Math.abs(this.value))),!1)},l.prototype.divmod=u.prototype.divmod=function(e){var t=T(this,e);return{quotient:t[0],remainder:t[1]}},l.prototype.over=l.prototype.divide=u.prototype.over=u.prototype.divide=function(e){return T(this,e)[0]},l.prototype.remainder=l.prototype.mod=u.prototype.remainder=u.prototype.mod=function(e){return T(this,e)[1]},u.prototype.pow=function(e){var t,r,n,i=H(e),o=this.value,s=i.value;if(0===s)return a[1];if(0===o)return a[0];if(1===o)return a[1];if(-1===o)return i.isEven()?a[1]:a[-1];if(i.sign)return a[0];if(!i.isSmall)throw new Error("The exponent "+i.toString()+" is too large.");if(this.isSmall&&c(t=Math.pow(o,s)))return new l(v(t));for(r=this,n=a[1];!0&s&&(n=n.times(r),--s),0!==s;)s/=2,r=r.square();return n},l.prototype.pow=u.prototype.pow,l.prototype.modPow=u.prototype.modPow=function(e,t){if(e=H(e),(t=H(t)).isZero())throw new Error("Cannot take modPow with modulus 0");for(var r=a[1],n=this.mod(t);e.isPositive();){if(n.isZero())return a[0];e.isOdd()&&(r=r.multiply(n).mod(t)),e=e.divide(2),n=n.square().mod(t)}return r},u.prototype.compareAbs=function(e){var t=H(e);return t.isSmall?1:A(this.value,t.value)},l.prototype.compareAbs=function(e){var t=H(e),r=Math.abs(this.value),n=t.value;return t.isSmall?r===(n=Math.abs(n))?0:r>n?1:-1:-1},u.prototype.compareTo=u.prototype.compare=function(e){if(e===1/0)return-1;if(e===-1/0)return 1;var t=H(e);return this.sign!==t.sign?t.sign?1:-1:t.isSmall?this.sign?-1:1:A(this.value,t.value)*(this.sign?-1:1)},l.prototype.compareTo=l.prototype.compare=function(e){if(e===1/0)return-1;if(e===-1/0)return 1;var t=H(e),r=this.value,n=t.value;return t.isSmall?r==n?0:r>n?1:-1:r<0!==t.sign?r<0?-1:1:r<0?1:-1},l.prototype.eq=l.prototype.equals=u.prototype.eq=u.prototype.equals=function(e){return 0===this.compare(e)},l.prototype.neq=l.prototype.notEquals=u.prototype.neq=u.prototype.notEquals=function(e){return 0!==this.compare(e)},l.prototype.gt=l.prototype.greater=u.prototype.gt=u.prototype.greater=function(e){return this.compare(e)>0},l.prototype.lt=l.prototype.lesser=u.prototype.lt=u.prototype.lesser=function(e){return this.compare(e)<0},l.prototype.geq=l.prototype.greaterOrEquals=u.prototype.geq=u.prototype.greaterOrEquals=function(e){return this.compare(e)>=0},l.prototype.leq=l.prototype.lesserOrEquals=u.prototype.leq=u.prototype.lesserOrEquals=function(e){return this.compare(e)<=0},u.prototype.isEven=function(){return 0==(1&this.value[0])},l.prototype.isEven=function(){return 0==(1&this.value)},u.prototype.isOdd=function(){return 1==(1&this.value[0])},l.prototype.isOdd=function(){return 1==(1&this.value)},u.prototype.isPositive=function(){return!this.sign},l.prototype.isPositive=function(){return this.value>0},u.prototype.isNegative=function(){return this.sign},l.prototype.isNegative=function(){return this.value<0},u.prototype.isUnit=function(){return!1},l.prototype.isUnit=function(){return 1===Math.abs(this.value)},u.prototype.isZero=function(){return!1},l.prototype.isZero=function(){return 0===this.value},l.prototype.isDivisibleBy=u.prototype.isDivisibleBy=function(e){var t=H(e),r=t.value;return 0!==r&&(1===r||(2===r?this.isEven():this.mod(t).equals(a[0])))},l.prototype.isPrime=u.prototype.isPrime=function(e){var t=I(this);if(void 0!==t)return t;var r=this.abs(),i=r.bitLength();if(i<=64)return $(r,[2,325,9375,28178,450775,9780504,1795265022]);for(var o=Math.log(2)*i,s=Math.ceil(!0===e?2*Math.pow(o,2):o),a=[],u=0;u<s;u++)a.push(n(u+2));return $(r,a)},l.prototype.isProbablePrime=u.prototype.isProbablePrime=function(e){var t=I(this);if(void 0!==t)return t;for(var r=this.abs(),i=void 0===e?5:e,o=[],s=0;s<i;s++)o.push(n.randBetween(2,r.minus(2)));return $(r,o)},l.prototype.modInv=u.prototype.modInv=function(e){for(var t,r,i,o=n.zero,s=n.one,a=H(e),u=this.abs();!u.equals(n.zero);)t=a.divide(u),r=o,i=a,o=s,a=u,s=r.subtract(t.multiply(s)),u=i.subtract(t.multiply(u));if(!a.equals(1))throw new Error(this.toString()+" and "+e.toString()+" are not co-prime");return-1===o.compare(0)&&(o=o.add(e)),this.isNegative()?o.negate():o},u.prototype.next=function(){var e=this.value;return this.sign?k(e,1,this.sign):new u(y(e,1),this.sign)},l.prototype.next=function(){var e=this.value;return e+1<i?new l(e+1):new u(o,!1)},u.prototype.prev=function(){var e=this.value;return this.sign?new u(y(e,1),!0):k(e,1,this.sign)},l.prototype.prev=function(){var e=this.value;return e-1>-i?new l(e-1):new u(o,!0)};for(var P=[1];2*P[P.length-1]<=t;)P.push(2*P[P.length-1]);var E=P.length,L=P[E-1];function q(e){return("number"==typeof e||"string"==typeof e)&&+Math.abs(e)<=t||e instanceof u&&e.value.length<=1}function N(e,t,r){t=H(t);for(var i=e.isNegative(),o=t.isNegative(),s=i?e.not():e,a=o?t.not():t,u=0,l=0,c=null,h=null,f=[];!s.isZero()||!a.isZero();)u=(c=T(s,L))[1].toJSNumber(),i&&(u=L-1-u),l=(h=T(a,L))[1].toJSNumber(),o&&(l=L-1-l),s=c[0],a=h[0],f.push(r(u,l));for(var p=0!==r(i?1:0,o?1:0)?n(-1):n(0),d=f.length-1;d>=0;d-=1)p=p.multiply(L).add(n(f[d]));return p}l.prototype.shiftLeft=u.prototype.shiftLeft=function(e){if(!q(e))throw new Error(String(e)+" is too large for shifting.");if((e=+e)<0)return this.shiftRight(-e);var t=this;if(t.isZero())return t;for(;e>=E;)t=t.multiply(L),e-=E-1;return t.multiply(P[e])},l.prototype.shiftRight=u.prototype.shiftRight=function(e){var t;if(!q(e))throw new Error(String(e)+" is too large for shifting.");if((e=+e)<0)return this.shiftLeft(-e);for(var r=this;e>=E;){if(r.isZero()||r.isNegative()&&r.isUnit())return r;r=(t=T(r,L))[1].isNegative()?t[0].prev():t[0],e-=E-1}return(t=T(r,P[e]))[1].isNegative()?t[0].prev():t[0]},l.prototype.not=u.prototype.not=function(){return this.negate().prev()},l.prototype.and=u.prototype.and=function(e){return N(this,e,function(e,t){return e&t})},l.prototype.or=u.prototype.or=function(e){return N(this,e,function(e,t){return e|t})},l.prototype.xor=u.prototype.xor=function(e){return N(this,e,function(e,t){return e^t})};var j=1<<30,C=(t&-t)*(t&-t)|j;function D(e){var r=e.value,n="number"==typeof r?r|j:r[0]+r[1]*t|C;return n&-n}function z(e,t){return e=H(e),t=H(t),e.greater(t)?e:t}function B(e,t){return e=H(e),t=H(t),e.lesser(t)?e:t}function R(e,t){if(e=H(e).abs(),t=H(t).abs(),e.equals(t))return e;if(e.isZero())return t;if(t.isZero())return e;for(var r,n,i=a[1];e.isEven()&&t.isEven();)r=Math.min(D(e),D(t)),e=e.divide(r),t=t.divide(r),i=i.multiply(r);for(;e.isEven();)e=e.divide(D(e));do{for(;t.isEven();)t=t.divide(D(t));e.greater(t)&&(n=t,t=e,e=n),t=t.subtract(e)}while(!t.isZero());return i.isUnit()?e:e.multiply(i)}l.prototype.bitLength=u.prototype.bitLength=function(){var e=this;return e.compareTo(n(0))<0&&(e=e.negate().subtract(n(1))),0===e.compareTo(n(0))?n(0):n(function e(t,r){if(r.compareTo(t)<=0){var i=e(t,r.square(r)),o=i.p,s=i.e,a=o.multiply(r);return a.compareTo(t)<=0?{p:a,e:2*s+1}:{p:o,e:2*s}}return{p:n(1),e:0}}(e,n(2)).e).add(n(1))};var U=function(e,t){for(var r=e.length,n=Math.abs(t),i=0;i<r;i++)if("-"!==(c=e[i].toLowerCase())&&/[a-z0-9]/.test(c)){if(/[0-9]/.test(c)&&+c>=n){if("1"===c&&1===n)continue;throw new Error(c+" is not a valid digit in base "+t+".")}if(c.charCodeAt(0)-87>=n)throw new Error(c+" is not a valid digit in base "+t+".")}if(2<=t&&t<=36&&r<=s/Math.log(t)){var o=parseInt(e,t);if(isNaN(o))throw new Error(c+" is not a valid digit in base "+t+".");return new l(parseInt(e,t))}t=H(t);var a=[],u="-"===e[0];for(i=u?1:0;i<e.length;i++){var c,h=(c=e[i].toLowerCase()).charCodeAt(0);if(48<=h&&h<=57)a.push(H(c));else if(97<=h&&h<=122)a.push(H(c.charCodeAt(0)-87));else{if("<"!==c)throw new Error(c+" is not a valid character");var f=i;do{i++}while(">"!==e[i]);a.push(H(e.slice(f+1,i)))}}return J(a,t,u)};function J(e,t,r){var n,i=a[0],o=a[1];for(n=e.length-1;n>=0;n--)i=i.add(e[n].times(o)),o=o.times(t);return r?i.negate():i}function V(e){return e<=35?"0123456789abcdefghijklmnopqrstuvwxyz".charAt(e):"<"+e+">"}function F(e,t){if((t=n(t)).isZero()){if(e.isZero())return{value:[0],isNegative:!1};throw new Error("Cannot convert nonzero numbers to base 0.")}if(t.equals(-1)){if(e.isZero())return{value:[0],isNegative:!1};if(e.isNegative())return{value:[].concat.apply([],Array.apply(null,Array(-e)).map(Array.prototype.valueOf,[1,0])),isNegative:!1};var r=Array.apply(null,Array(+e-1)).map(Array.prototype.valueOf,[0,1]);return r.unshift([1]),{value:[].concat.apply([],r),isNegative:!1}}var i=!1;if(e.isNegative()&&t.isPositive()&&(i=!0,e=e.abs()),t.equals(1))return e.isZero()?{value:[0],isNegative:!1}:{value:Array.apply(null,Array(+e)).map(Number.prototype.valueOf,1),isNegative:i};for(var o,s=[],a=e;a.isNegative()||a.compareAbs(t)>=0;){o=a.divmod(t),a=o.quotient;var u=o.remainder;u.isNegative()&&(u=t.minus(u).abs(),a=a.next()),s.push(u.toJSNumber())}return s.push(a.toJSNumber()),{value:s.reverse(),isNegative:i}}function K(e,t){var r=F(e,t);return(r.isNegative?"-":"")+r.value.map(V).join("")}function Z(e){if(c(+e)){var t=+e;if(t===v(t))return new l(t);throw new Error("Invalid integer: "+e)}var n="-"===e[0];n&&(e=e.slice(1));var i=e.split(/e/i);if(i.length>2)throw new Error("Invalid integer: "+i.join("e"));if(2===i.length){var o=i[1];if("+"===o[0]&&(o=o.slice(1)),(o=+o)!==v(o)||!c(o))throw new Error("Invalid integer: "+o+" is not a valid exponent.");var s=i[0],a=s.indexOf(".");if(a>=0&&(o-=s.length-a-1,s=s.slice(0,a)+s.slice(a+1)),o<0)throw new Error("Cannot include negative exponent part for integers");e=s+=new Array(o+1).join("0")}if(!/^([0-9][0-9]*)$/.test(e))throw new Error("Invalid integer: "+e);for(var h=[],f=e.length,d=r,m=f-d;f>0;)h.push(+e.slice(m,f)),(m-=d)<0&&(m=0),f-=d;return p(h),new u(h,n)}function H(e){return"number"==typeof e?function(e){if(c(e)){if(e!==v(e))throw new Error(e+" is not an integer.");return new l(e)}return Z(e.toString())}(e):"string"==typeof e?Z(e):e}u.prototype.toArray=function(e){return F(this,e)},l.prototype.toArray=function(e){return F(this,e)},u.prototype.toString=function(e){if(void 0===e&&(e=10),10!==e)return K(this,e);for(var t,r=this.value,n=r.length,i=String(r[--n]);--n>=0;)t=String(r[n]),i+="0000000".slice(t.length)+t;return(this.sign?"-":"")+i},l.prototype.toString=function(e){return void 0===e&&(e=10),10!=e?K(this,e):String(this.value)},u.prototype.toJSON=l.prototype.toJSON=function(){return this.toString()},u.prototype.toJSNumber=u.prototype.valueOf=function(){return parseInt(this.toString(),10)},l.prototype.toJSNumber=l.prototype.valueOf=function(){return this.value};for(var Q=0;Q<1e3;Q++)a[Q]=new l(Q),Q>0&&(a[-Q]=new l(-Q));return a.one=a[1],a.zero=a[0],a.minusOne=a[-1],a.max=z,a.min=B,a.gcd=R,a.lcm=function(e,t){return e=H(e).abs(),t=H(t).abs(),e.divide(R(e,t)).multiply(t)},a.isInstance=function(e){return e instanceof u||e instanceof l},a.randBetween=function(e,r){var n=B(e=H(e),r=H(r)),i=z(e,r).subtract(n).add(1);if(i.isSmall)return n.add(Math.floor(Math.random()*i));for(var o=[],s=!0,a=i.value.length-1;a>=0;a--){var c=s?i.value[a]:t,h=v(Math.random()*c);o.unshift(h),h<c&&(s=!1)}return o=f(o),n.add("number"==typeof o?new l(o):new u(o,!1))},a.fromArray=function(e,t,r){return J(e.map(H),H(t||10),r)},a}();e.hasOwnProperty("exports")&&(e.exports=n),void 0===(r=(function(){return n}).apply(t,[]))||(e.exports=r)}).call(this,r("YuTi")(e))},llEn:function(e,t,r){"use strict";var n=r("Cchj"),i=r("dAlA"),o=r("MxGg"),s=r("O2hg"),a=s.validate,u=s.ValidationError,l=["bitcoincash","bchtest","bchreg"];function c(e){for(var t=new Uint8Array(e.length),r=0;r<e.length;++r)t[r]=31&e[r].charCodeAt(0);return t}function h(e,t){var r=new Uint8Array(e.length+t.length);return r.set(e),r.set(t,e.length),r}function f(e){for(var t=[656907472481,522768456162,0xf33e5fb3c4,748107326120,130178868336],r=i(1),n=0;n<e.length;++n){var o=e[n],s=r.shiftRight(35);r=r.and(34359738367).shiftLeft(5).xor(o);for(var a=0;a<t.length;++a)s.shiftRight(a).and(1).equals(1)&&(r=r.xor(t[a]))}return r.xor(1)}function p(e){return e===e.toLowerCase()||e===e.toUpperCase()}e.exports={encode:function(e,t,r){a("string"==typeof e&&function(e){return p(e)&&-1!==l.indexOf(e.toLowerCase())}(e),"Invalid prefix: "+e+"."),a("string"==typeof t,"Invalid type: "+t+"."),a(r instanceof Uint8Array,"Invalid hash: "+r+".");var i,s=h(c(e),new Uint8Array(1)),d=function(e){switch(e){case"P2PKH":return 0;case"P2SH":return 8;default:throw new u("Invalid type: "+e+".")}}(t)+function(e){switch(8*e.length){case 160:return 0;case 192:return 1;case 224:return 2;case 256:return 3;case 320:return 4;case 384:return 5;case 448:return 6;case 512:return 7;default:throw new u("Invalid hash size: "+e.length+".")}}(r),v=(i=h(new Uint8Array([d]),r),o(i,8,5)),m=h(h(s,v),new Uint8Array(8)),g=h(v,function(e){for(var t=new Uint8Array(8),r=0;r<8;++r)t[7-r]=e.and(31).toJSNumber(),e=e.shiftRight(5);return t}(f(m)));return e+":"+n.encode(g)},decode:function(e){a("string"==typeof e&&p(e),"Invalid address: "+e+".");var t=e.toLowerCase().split(":");a(2===t.length,"Missing prefix: "+e+".");var r=t[0],i=n.decode(t[1]);a(function(e,t){var r=h(c(e),new Uint8Array(1));return f(h(r,t)).equals(0)}(r,i),"Invalid checksum: "+e+".");var s,l=(s=i.subarray(0,-8),o(s,5,8,!0)),d=l[0],v=l.subarray(1);return a(function(e){switch(7&e){case 0:return 160;case 1:return 192;case 2:return 224;case 3:return 256;case 4:return 320;case 5:return 384;case 6:return 448;case 7:return 512}}(d)===8*v.length,"Invalid hash size: "+e+"."),{prefix:r,type:function(e){switch(120&e){case 0:return"P2PKH";case 8:return"P2SH";default:throw new u("Invalid address type in version byte: "+e+".")}}(d),hash:v}},ValidationError:u}},moT7:function(e,t,r){"use strict";var n=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)Object.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t.default=e,t},i=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const o=r("J66h"),s=n(r("llEn")),a=i(r("kB5k"));function u(e){return Uint8Array.from(atob(e),e=>e.charCodeAt(0))}t.LOKAD_ID_BASE64=o.Base64.encode("EXCH"),t.VERSION={op:82},t.decodePrice=function(e,t){const r=u(t.power),n=u(t.price),i=2==r.length&&1==r[1],o=new a.default(new DataView(n.buffer).getUint32(0,!1)),s=i?new a.default("1").div(o):o;return{pricePerToken:new a.default("10").pow(e).times(s),scriptPrice:o}},t.decodeAddress=function(e){return s.encode("bitcoincash","P2PKH",u(e))}},uGzR:function(e,t,r){"use strict";var n=this&&this.__awaiter||function(e,t,r,n){return new(r||(r=Promise))(function(i,o){function s(e){try{u(n.next(e))}catch(t){o(t)}}function a(e){try{u(n.throw(e))}catch(t){o(t)}}function u(e){e.done?i(e.value):new r(function(t){t(e.value)}).then(s,a)}u((n=n.apply(e,t||[])).next())})},i=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const o=r("Mpt7"),s=r("J66h"),a=r("moT7"),u=r("7Xm5"),l=i(r("kB5k")),c=i(r("/+cc")),h={shouldSort:!0,threshold:.6,location:0,distance:100,maxPatternLength:32,minMatchCharLength:1,keys:["symbol","name"]};class f{constructor(){this._tokenDetails=o.Map(),this._tokenLastTrades=o.Map(),this._tokenVolumes=o.Map(),this._tokenPrices=o.Map(),this._tokenPriceIncreases=o.Map(),this._tokenOverview=o.Map(),this._fuse=new c.default([],h)}static create(){return n(this,void 0,void 0,function*(){const e=new f,t=[e._fetchDetails(),e._fetchTokens(),e._fetchPrice24h(),e._fetchVolume24h()];for(const r of t)yield r;return e._updatePriceIncrease(),e._updateOverview(),e})}_fetchDetails(){return n(this,void 0,void 0,function*(){const e=yield fetch("https://rest.bitcoin.com/v2/slp/list"),t=yield e.json();this._tokenDetails=o.Map(t.map(e=>[e.id,e]))})}_fetchTokens(){return n(this,void 0,void 0,function*(){const e=s.Base64.encode(JSON.stringify({v:3,q:{db:["c","u"],aggregate:[{$match:{"in.b0":a.LOKAD_ID_BASE64,"in.b1":a.VERSION,"slp.valid":!0}},{$addFields:{utxoId:{$concat:["$tx.h",":1"]}}},{$lookup:{from:"utxos",localField:"utxoId",foreignField:"utxo",as:"foundUtxo"}},{$addFields:{exchInput:{$arrayElemAt:[{$filter:{input:"$in",as:"input",cond:{$and:[{$eq:["$$input.b0",a.LOKAD_ID_BASE64]},{$eq:["$$input.b1",a.VERSION]}]}}},0]},hasUtxo:{$size:"$foundUtxo"}}},{$sort:{hasUtxo:-1,"blk.t":-1}},{$group:{_id:"$slp.detail.tokenIdHex",decimals:{$first:"$slp.detail.decimals"},numberOfOpenOffers:{$sum:"$hasUtxo"},numberOfClosedOffers:{$sum:{$subtract:[1,"$hasUtxo"]}},lastTrade:{$first:{timestamp:"$blk.t",power:"$exchInput.b2",price:"$exchInput.b3",isAccepted:{$ne:["$foundUtxo",[]]}}}}}]}})),t=yield fetch("https://slpdb.fountainhead.cash/q/"+e),r=yield t.json(),n=o.List.of(r.u,r.c);this._tokenLastTrades=n.map(e=>o.Map(e.map(e=>[e._id,{numberOfOpenOffers:e.numberOfOpenOffers,numberOfClosedOffers:e.numberOfClosedOffers,lastTrade:{pricePerToken:a.decodePrice(e.decimals,e.lastTrade).pricePerToken,timestamp:e.lastTrade.timestamp,isAccepted:e.lastTrade.isAccepted}}]))).reduce((e,t)=>o.Map(o.Set(e.keySeq().concat(t.keySeq())).map(r=>{const n=e.get(r),i=t.get(r);let o=n||i;if(void 0!==n&&void 0!==i&&(o={numberOfClosedOffers:n.numberOfClosedOffers+i.numberOfClosedOffers,numberOfOpenOffers:n.numberOfOpenOffers+i.numberOfOpenOffers,lastTrade:void 0===n.lastTrade.timestamp?n.lastTrade:i.lastTrade}),void 0===o)throw"Impossible";return[r,o]})))})}_fetchVolume24h(){return n(this,void 0,void 0,function*(){const e={v:3,q:{db:["c","u"],aggregate:[{$match:{"in.b0":a.LOKAD_ID_BASE64,"in.b1":a.VERSION,"out.e.a":u.defaultNetworkSettings.feeAddressSlp,"slp.valid":!0,$and:[{$or:[{"slp.detail.outputs":{$size:2}},{"slp.detail.outputs":{$size:3}}]},{$or:[{blk:{$exists:!1}},{"blk.t":{$gt:(new Date).getTime()/1e3-86400}}]}]}},{$addFields:{tradedTokens:{$arrayElemAt:["$slp.detail.outputs",-1]},tradedSatoshis:{$arrayElemAt:["$out",{$subtract:[{$size:"$slp.detail.outputs"},1]}]}}},{$project:{txid:"$tx.h",tokenId:"$slp.detail.tokenIdHex",tradedTokens:{$toDecimal:"$tradedTokens.amount"},tradedSatoshis:"$tradedSatoshis.e.v",slp:"$slp"}},{$group:{_id:"$tokenId",volumeTokens:{$sum:"$tradedTokens"},volumeSatoshis:{$sum:"$tradedSatoshis"},numberOfTrades:{$sum:1},decimals:{$first:"$slp.detail.decimals"}}}]}},t=s.Base64.encode(JSON.stringify(e)),r=yield fetch("https://slpdb.fountainhead.cash/q/"+t),n=yield r.json(),i=o.List.of(n.u,n.c);this._tokenVolumes=i.map(e=>o.Map(e.map(e=>[e._id,{last24h:{numberOfTrades:e.numberOfTrades,volumeSatoshis:new l.default(e.volumeSatoshis),volumeTokens:new l.default(e.volumeTokens)}}]))).reduce((e,t)=>o.Map(o.Set(e.keySeq().concat(t.keySeq())).map(r=>{const n=e.get(r),i=t.get(r);let o=n||i;if(void 0!==n&&void 0!==i&&(o={last24h:{numberOfTrades:n.last24h.numberOfTrades+i.last24h.numberOfTrades,volumeTokens:n.last24h.volumeTokens.plus(i.last24h.volumeTokens),volumeSatoshis:n.last24h.volumeSatoshis.plus(i.last24h.volumeSatoshis)}}),void 0===o)throw"Impossible";return[r,o]})))})}_fetchPrice24h(){return n(this,void 0,void 0,function*(){const e={v:3,q:{db:["c","u"],aggregate:[{$match:{"in.b0":a.LOKAD_ID_BASE64,"in.b1":a.VERSION,"out.e.a":u.defaultNetworkSettings.feeAddressSlp,"slp.valid":!0,$or:[{"slp.detail.outputs":{$size:2}},{"slp.detail.outputs":{$size:3}}],"blk.t":{$lt:(new Date).getTime()/1e3-86400}}},{$sort:{"blk.t":-1}},{$unwind:"$in"},{$match:{"in.b0":a.LOKAD_ID_BASE64,"in.b1":a.VERSION}},{$group:{_id:"$slp.detail.tokenIdHex",price:{$first:"$in.b3"},power:{$first:"$in.b2"},decimals:{$first:"$slp.detail.decimals"}}}]}},t=s.Base64.encode(JSON.stringify(e)),r=yield fetch("https://slpdb.fountainhead.cash/q/"+t),n=yield r.json();this._tokenPrices=o.Map(n.c.map(e=>[e._id,{last24h:{pricePerToken:a.decodePrice(e.decimals,e).pricePerToken}}]))})}_updatePriceIncrease(){this._tokenPriceIncreases=o.Map(o.Set(this._tokenLastTrades.keySeq().concat(this._tokenPrices.keySeq())).map(e=>{const t=this._tokenLastTrades.get(e),r=this._tokenPrices.get(e);return[e,void 0!==t&&void 0!==r?{last24h:{priceIncrease:t.lastTrade.pricePerToken.div(r.last24h.pricePerToken).minus("1")}}:{last24h:{priceIncrease:void 0!==r?new l.default(0):void 0}}]}))}_updateOverview(){this._tokenOverview=o.Map(this._tokenDetails.entrySeq().map(([e,t])=>{const r=this._tokenLastTrades.get(e),n=this._tokenVolumes.get(e),i=this._tokenPrices.get(e),o=this._tokenPriceIncreases.get(e);return[e,{tokenId:e,decimals:t.decimals,name:t.name,symbol:t.symbol,totalNumberOfOpenOffers:r?r.numberOfOpenOffers:0,totalNumberOfClosedOffers:r?r.numberOfClosedOffers:0,totalSupplyToken:new l.default(t.circulatingSupply),marketCapSatoshis:r?r.lastTrade.pricePerToken.times(t.circulatingSupply):void 0,lastTrade:{isAccepted:r?r.lastTrade.isAccepted:void 0,pricePerToken:r?r.lastTrade.pricePerToken:void 0,timestamp:r?r.lastTrade.timestamp:void 0},last24h:{numberOfTrades:n?n.last24h.numberOfTrades:0,volumeSatoshis:n?n.last24h.volumeSatoshis:new l.default(0),volumeTokens:n?n.last24h.volumeTokens:new l.default(0),pricePerToken:i?i.last24h.pricePerToken:void 0,priceIncrease:o?o.last24h.priceIncrease:void 0}}]})),this._fuse=new c.default(this._tokenOverview.valueSeq().toArray(),h)}tokenDetails(e){return this._tokenDetails.get(e)}tokens(e,t,r,n=!1){let i;switch(e){case"totalNumberOfOpenOffers":i=e=>e.totalNumberOfOpenOffers;break;case"totalNumberOfClosedOffers":i=e=>e.totalNumberOfClosedOffers;break;case"pricePerToken":i=e=>e.lastTrade.pricePerToken;break;case"marketCapSatoshis":i=e=>e.marketCapSatoshis;break;case"volumeTokens":i=e=>e.last24h.volumeTokens;break;case"volumeSatoshis":i=e=>e.last24h.volumeSatoshis;break;case"priceIncrease":i=e=>e.last24h.priceIncrease;break;default:throw"Unknown sort key: "+e}const o=n?1:-1;return this._tokenOverview.valueSeq().sortBy(e=>{const t=i(e);if(void 0!==t)return new l.default(t).times(o).toNumber()}).skip(t).take(r).toList()}searchTokens(e){const t=this._tokenOverview.get(e);return void 0!==t?o.List.of(t):o.List(this._fuse.search(e))}}t.MarketOverview=f},vTob:function(e,t,r){"use strict";r.d(t,"a",function(){return l});var n=r("2Vo4"),i=r("Cfvw"),o=r("IzEk"),s=r("lJxs"),a=r("Rkdt"),u=r("8Y7J");const l=(()=>{class e{constructor(){this.marketToken$=new n.a(null),this.marketOverview$=new n.a([]),this.marketOverviewToken$=new n.a(null),this.loadMarketOverviewToken=e=>{this.marketOverviewToken$.next(null),this.loadMarketOverviewQuery().pipe(Object(o.a)(1),Object(s.a)(t=>t.searchTokens(e).toArray())).subscribe(e=>{this.marketOverviewToken$.next(e[0])})},this.loadMarketOverview=(e,t,r)=>{r?this.loadMarketOverviewSearch(r):this.marketOverview$.pipe(Object(o.a)(1)).subscribe(r=>{r.length?this.loadMarketOverviewAll(e,t):this.loadMarketOverviewSmartInit(e,t)})},this.loadOffersAndStartListener=e=>{Object(i.a)(a.MarketToken.create(e,a.defaultNetworkSettings)).pipe(Object(o.a)(1)).subscribe(e=>{this.marketTokenRef=e,this.marketToken$.next(this.marketTokenRef),this.startMarketTokenListener()})},this.unsubscribeMarketTokenListener=()=>{this.marketTokenRef=null},this.getTop10GainersAndLosers=()=>this.loadMarketOverviewQuery().pipe(Object(o.a)(1),Object(s.a)(e=>({gainers:e.tokens("priceIncrease",0,10,!1).toArray(),losers:e.tokens("priceIncrease",0,10,!0).toArray()}))),this.loadMarketOverviewSearch=e=>{this.loadMarketOverviewQuery().pipe(Object(o.a)(1),Object(s.a)(t=>t.searchTokens(e).toArray())).subscribe(e=>{this.marketOverview$.next(e)})},this.loadMarketOverviewAll=(e,t)=>{this.loadMarketOverviewQuery().pipe(Object(o.a)(1),Object(s.a)(r=>r.tokens(e,0,100,t).toArray())).subscribe(e=>{this.marketOverview$.next(e)})},this.loadMarketOverviewSmartInit=(e,t)=>{this.loadMarketOverviewQuery().pipe(Object(o.a)(1),Object(s.a)(r=>r.tokens(e,0,20,t).toArray())).subscribe(r=>{this.marketOverview$.next(r),this.loadMarketOverviewSmartRemaining(e,t,r)})},this.loadMarketOverviewSmartRemaining=(e,t,r)=>{this.loadMarketOverviewQuery().pipe(Object(o.a)(1),Object(s.a)(r=>r.tokens(e,20,80,t).toArray())).subscribe(e=>{this.marketOverview$.next([...r,...e])})},this.loadMarketOverviewQuery=()=>Object(i.a)(a.MarketOverview.create()),this.startMarketTokenListener=()=>{this.marketTokenRef.addReceivedOfferListener(()=>{this.marketToken$.next(this.marketTokenRef)})}}get marketToken(){return this.marketToken$.asObservable()}get marketOverview(){return this.marketOverview$.asObservable()}get marketOverviewToken(){return this.marketOverviewToken$.asObservable()}}return e.ngInjectableDef=u.Pb({factory:function(){return new e},token:e,providedIn:"root"}),e})()}}]);